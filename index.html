<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Value of Silence</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Barlow:wght@300;400&family=Oswald:wght@500;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Barlow', sans-serif;
            font-size: 14pt;
            background-color: #1a1a1a;
            padding: 2vh 2vw;
            margin: 0;
            color: #e5e5e5;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
        }

        .container-wrapper {
            background-color: #2a2a2a;
            border-radius: 1rem;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.3);
            padding: 2rem;
            max-width: 1000px;
            width: 100%;
            margin: 2rem auto;
            text-align: center;
        }

        h1 {
            font-family: 'Oswald', sans-serif;
            font-size: 32pt;
            font-weight: 700;
            color: #ffffff;
            margin-bottom: 2.5rem; /* Increased margin for more space */
            text-align: center;
        }

        p {
            font-family: 'Barlow', sans-serif;
            font-size: clamp(12pt, 3vw, 14pt);
            line-height: 1.6;
            margin: 0 auto 1.5rem;
            color: #b5b5b5;
            text-align: center;
        }

        .timer-display {
            font-family: 'Oswald', sans-serif;
            font-weight: 500;
            letter-spacing: 0.1em;
            color: #c42168; /* Changed color to a darker magenta */
        }

        .button-primary {
            background-color: #e91d63;
            color: white;
            padding: 0.75rem 1.5rem;
            border-radius: 0.5rem;
            cursor: pointer;
            transition: background-color 0.3s ease;
            font-family: 'Barlow', sans-serif;
            font-weight: 400;
            text-transform: uppercase;
        }
        .button-primary:hover {
            background-color: #d11a5a;
        }
    </style>
</head>
<body>

<div class="container-wrapper">
    <h1 id="main-header">The Value of Silence</h1>
    <p class="mb-8">
        Inspired by composer John Cage's 4'33", this module invites you to listen. When you click play, a timer will begin. No sounds will be generated by the app. Your task is to simply listen to your surroundings and discover the music that is already there.
    </p>

    <div class="flex justify-center my-8">
        <div class="timer-display text-5xl sm:text-6xl font-light">
            <span id="minutes">04</span>:<span id="seconds">33</span>
        </div>
    </div>

    <div class="flex flex-col sm:flex-row items-center justify-center gap-4">
        <button id="start-btn" class="button-primary">
            Start
        </button>
        <button id="pause-btn" class="bg-gray-400 text-gray-800 font-semibold py-3 px-8 rounded-xl shadow-lg hover:bg-gray-500 transition-all duration-300 transform hover:scale-105 active:scale-95">
            Pause
        </button>
        <button id="reset-btn" class="bg-gray-500 hover:bg-gray-600 text-white font-semibold py-3 px-8 rounded-xl shadow-lg transition-all duration-300 transform hover:scale-105 active:scale-95">
            Reset
        </button>
    </div>
    <div class="mt-4">
        <a href="https://www.jennifermora.com/portfolio" target="_blank">
            <button class="button-primary">Return to Portfolio</button>
        </a>
    </div>
</div>

<div id="message-box" class="message-box"></div>

<script>
    // Self-contained JavaScript for the timer module
    window.onload = function() {
        const minutesDisplay = document.getElementById('minutes');
        const secondsDisplay = document.getElementById('seconds');
        const startBtn = document.getElementById('start-btn');
        const pauseBtn = document.getElementById('pause-btn');
        const resetBtn = document.getElementById('reset-btn');
        const totalDuration = 273; // 4 minutes and 33 seconds in total seconds
        let remainingTime = totalDuration;
        let timerInterval = null;
        let isPaused = false;

        // Function to show a temporary message to the user
        const showMessage = (text) => {
            const msgBox = document.getElementById('message-box');
            msgBox.textContent = text;
            msgBox.style.display = 'block';
            setTimeout(() => {
                msgBox.style.opacity = 1;
            }, 10);
            setTimeout(() => {
                msgBox.style.opacity = 0;
                setTimeout(() => msgBox.style.display = 'none', 300);
            }, 2000);
        };

        // Function to format time from seconds into MM:SS format
        const formatTime = (seconds) => {
            const mins = Math.floor(seconds / 60);
            const secs = seconds % 60;
            return {
                minutes: String(mins).padStart(2, '0'),
                seconds: String(secs).padStart(2, '0')
            };
        };

        // Function to update the timer display
        const updateDisplay = (seconds) => {
            const formattedTime = formatTime(seconds);
            minutesDisplay.textContent = formattedTime.minutes;
            secondsDisplay.textContent = formattedTime.seconds;
        };

        // Start the timer
        const startTimer = () => {
            if (timerInterval !== null) {
                return; // Prevent multiple timers from running
            }
            isPaused = false;
            timerInterval = setInterval(() => {
                if (remainingTime > 0) {
                    remainingTime--;
                    updateDisplay(remainingTime);
                } else {
                    clearInterval(timerInterval);
                    timerInterval = null;
                    showMessage('The piece is complete.');
                }
            }, 1000);
            showMessage('Listening...');
        };

        // Pause the timer
        const pauseTimer = () => {
            if (timerInterval !== null) {
                clearInterval(timerInterval);
                timerInterval = null;
                isPaused = true;
                showMessage('Timer paused.');
            }
        };

        // Reset the timer
        const resetTimer = () => {
            clearInterval(timerInterval);
            timerInterval = null;
            remainingTime = totalDuration;
            isPaused = false;
            updateDisplay(remainingTime);
            showMessage('Timer reset.');
        };

        // Add event listeners to buttons
        startBtn.addEventListener('click', () => {
            if (isPaused) {
                startTimer();
            } else if (timerInterval === null && remainingTime === totalDuration) {
                startTimer();
            } else {
                showMessage('Timer is already running.');
            }
        });

        pauseBtn.addEventListener('click', pauseTimer);
        resetBtn.addEventListener('click', resetTimer);
    };
</script>
</body>
</html>
